@startuml System_Overview

!theme plain
skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam padding 10
skinparam BoxPadding 10
skinparam RectanglePadding 10
skinparam RectangleBorderThickness 2
skinparam Shadowing false
skinparam ArrowThickness 2

actor "**Client**\n(Consumer)" as Client #FFE6B3
participant "**Vendor**\n(Service Provider)" as Vendor #E6F3E6
participant "**Issuer**\n(Trusted Authority)" as Issuer #FFE6E6


Client -> Issuer: **1. Registration**\n(Create account with initial balance)
activate Issuer
Issuer --> Client: Account created\n(Balance: 10M)
deactivate Issuer

Client -> Issuer: **2. Channel Opening**\n(Lock funds in payment channel)
activate Issuer
Issuer -> Issuer: Lock funds (e.g., 1M)
Issuer --> Client: Channel opened\n(Channel ID: abc123)
deactivate Issuer


Client -> Vendor: **3. Payment Streaming**\n(9,999 off-chain micropayments)
activate Vendor

loop 9,999 times
  Client -> Vendor: Signed payment\n(owed_amount: 1, 2, 3... 9,999)
  Vendor --> Client: Payment accepted
end

deactivate Vendor

Vendor -> Issuer: **4. Channel Closure**\n(Final settlement with last payment proof)
activate Issuer
Issuer -> Issuer: Verify both signatures\n(Client + Vendor)
Issuer -> Issuer: Transfer funds\n(Vendor: 9,999 | Client: remainder)
Issuer --> Vendor: Settlement complete
deactivate Issuer

Vendor --> Client: Channel closed

@enduml

