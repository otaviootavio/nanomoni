@startuml System_Overview

!theme plain
skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam padding 5
skinparam BoxPadding 5
skinparam RectanglePadding 5
skinparam NotePadding 2
skinparam RectangleBorderThickness 2
skinparam Shadowing false
skinparam ArrowThickness 2

hide footbox

actor "**Client**" as Client #FFE6B3
participant "**Vendor**" as Vendor #E6F3E6
participant "**Issuer**" as Issuer #FFE6E6

legend right
  **Roles**
  Client → Consumer
  Vendor → Service Provider
  Issuer → Trusted Authority
endlegend

note over Client, Issuer: **1. Registration**
Client -> Issuer: RegistrationRequest
activate Issuer
Issuer -> Issuer: ValidateRequest
Issuer --> Client: Account created
deactivate Issuer

note over Client, Issuer: **2. Channel Opening**
Client -> Issuer: OpenChannelRequest
activate Issuer
Issuer -> Issuer: ValidateRequest
Issuer -> Issuer: LockFunds
Issuer --> Client: Channel opened
deactivate Issuer


note over Client, Vendor: **3. Payment Streaming**
Client -> Vendor: Start payment stream
activate Vendor

loop 9,999 times
  Client -> Vendor: Submit payment
  Vendor --> Client: Payment accepted
end

deactivate Vendor


note over Vendor, Issuer: **4. Channel Settlement**
Vendor -> Issuer: Initiate settlement
activate Issuer
Issuer -> Issuer: Validate settlement
Issuer -> Issuer: Transfer funds
Issuer --> Vendor: Settlement complete
deactivate Issuer

Vendor --> Client: Channel closed

@enduml
